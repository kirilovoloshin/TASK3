{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\admin\\\\Desktop\\\\WebApplication1\\\\WebApplicationUI\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { environment } from '../../../environments/environment.prod';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\n\nfunction MainComponent_body_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"body\");\n    i0.ɵɵelementStart(1, \"div\", 1);\n    i0.ɵɵelementStart(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4, \"\\u0412\\u0438\\u0431\\u0435\\u0440\\u0456\\u0442\\u044C \\u0441\\u0432\\u043E\\u044E \\u0441\\u0442\\u043E\\u0440\\u043E\\u043D\\u0443\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 3);\n    i0.ɵɵlistener(\"click\", function MainComponent_body_0_Template_div_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      ctx_r3.cellValue = 1;\n      return ctx_r3.start();\n    });\n    i0.ɵɵelement(6, \"img\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 3);\n    i0.ɵɵlistener(\"click\", function MainComponent_body_0_Template_div_click_7_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext();\n      ctx_r5.cellValue = 0;\n      return ctx_r5.start();\n    });\n    i0.ɵɵelement(8, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MainComponent_body_1_div_1_div_1_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 12);\n  }\n\n  if (rf & 2) {\n    const cell_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"alt\", cell_r9.value);\n  }\n}\n\nfunction MainComponent_body_1_div_1_div_1_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 13);\n  }\n\n  if (rf & 2) {\n    const cell_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"alt\", cell_r9.value);\n  }\n}\n\nfunction MainComponent_body_1_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵlistener(\"click\", function MainComponent_body_1_div_1_div_1_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const cell_r9 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return !ctx_r14.moving ? ctx_r14.move(cell_r9) : \"\";\n    });\n    i0.ɵɵtemplate(1, MainComponent_body_1_div_1_div_1_img_1_Template, 1, 1, \"img\", 10);\n    i0.ɵɵtemplate(2, MainComponent_body_1_div_1_div_1_img_2_Template, 1, 1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const cell_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", cell_r9.value === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", cell_r9.value === 1);\n  }\n}\n\nfunction MainComponent_body_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtemplate(1, MainComponent_body_1_div_1_div_1_Template, 3, 2, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const cells_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", cells_r7);\n  }\n}\n\nfunction MainComponent_body_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"body\");\n    i0.ɵɵtemplate(1, MainComponent_body_1_div_1_Template, 2, 1, \"div\", 6);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.Field);\n  }\n}\n\nfunction MainComponent_body_2_h1_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r16.wonStr);\n  }\n}\n\nfunction MainComponent_body_2_h1_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r17.loseStr);\n  }\n}\n\nfunction MainComponent_body_2_h1_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵtext(1, \"\\u041D\\u0456\\u0447\\u0456\\u044F\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction MainComponent_body_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"body\");\n    i0.ɵɵelementStart(1, \"div\", 14);\n    i0.ɵɵtemplate(2, MainComponent_body_2_h1_2_Template, 2, 1, \"h1\", 0);\n    i0.ɵɵtemplate(3, MainComponent_body_2_h1_3_Template, 2, 1, \"h1\", 0);\n    i0.ɵɵtemplate(4, MainComponent_body_2_h1_4_Template, 2, 0, \"h1\", 0);\n    i0.ɵɵelementStart(5, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function MainComponent_body_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      ctx_r19.win = 0;\n      return ctx_r19.cellValue = -1;\n    });\n    i0.ɵɵtext(6, \"\\u0421\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439 \\u0449\\u0435\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.win === 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.win === -1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.win === 2);\n  }\n}\n\nexport let MainComponent = /*#__PURE__*/(() => {\n  class MainComponent {\n    constructor(client) {\n      this.client = client;\n      this.Field = [];\n      this.cellValue = -1;\n      this.win = 0;\n      this.moving = false;\n      this.wonStr = 'Ти виграв!';\n      this.loseStr = 'Ти програв!';\n    }\n\n    start() {\n      this.client.get(environment.baseUrl + '/Game').subscribe(data => {\n        this.Field = data;\n\n        if (this.cellValue === 0) {\n          this.moving = true;\n          this.serverMove();\n        }\n      });\n    }\n\n    move(cell) {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        if (cell.value === null) {\n          _this.moving = true;\n          cell.value = _this.cellValue;\n\n          _this.checkWin(_this.cellValue);\n\n          if (_this.win === 0) _this.serverMove();\n        }\n      })();\n    }\n\n    serverMove() {\n      this.client.post(environment.baseUrl + '/Game/ServerMove?value=' + (this.cellValue === 0 ? 1 : 0), this.Field).subscribe(data => {\n        this.Field = data;\n        this.checkWin(this.cellValue === 0 ? 1 : 0);\n        this.moving = false;\n      });\n    }\n\n    checkWin(value) {\n      let result = value === this.cellValue ? 1 : -1;\n      let res = false;\n      const _boardSize = 3;\n\n      for (let i = 0; i < _boardSize; i++) {\n        res = true;\n\n        for (let j = 0; j < _boardSize; j++) {\n          if (this.Field[i][j].value !== value) res = false;\n        }\n\n        if (res) {\n          this.resulting(result);\n          return;\n        }\n      }\n\n      for (let i = 0; i < _boardSize; i++) {\n        res = true;\n\n        for (let j = 0; j < _boardSize; j++) {\n          if (this.Field[j][i].value !== value) res = false;\n        }\n\n        if (res) {\n          this.resulting(result);\n          return;\n        }\n      }\n\n      res = true;\n\n      for (let i = 0; i < _boardSize; i++) {\n        if (this.Field[i][i].value !== value) res = false;\n      }\n\n      if (res) {\n        this.resulting(result);\n        return;\n      }\n\n      res = true;\n\n      for (let i = 0; i < _boardSize; i++) {\n        if (this.Field[i][_boardSize - 1 - i].value !== value) res = false;\n      }\n\n      if (res) {\n        this.resulting(result);\n        return;\n      } //check draw\n\n\n      let v = this.Field.reduce((a, b) => a.concat(b)).filter(a => a.value === null);\n\n      if (v === undefined || v.length === 0) {\n        this.resulting(2);\n        return;\n      }\n    }\n\n    resulting(result) {\n      this.win = result;\n      this.moving = false;\n      this.Field = [];\n    }\n\n  }\n\n  MainComponent.ɵfac = function MainComponent_Factory(t) {\n    return new (t || MainComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n\n  MainComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MainComponent,\n    selectors: [[\"app-main-component\"]],\n    decls: 3,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [2, \"display\", \"flex\", \"justify-content\", \"space-around\", \"flex-wrap\", \"wrap\", \"text-align\", \"center\"], [2, \"width\", \"100%\"], [2, \"width\", \"100px\", \"height\", \"100px\", \"display\", \"inline-block\", 3, \"click\"], [\"alt\", \"cross\", \"src\", \"./assets/img/cross.jpg\"], [\"alt\", \"zero\", \"src\", \"./assets/img/zero.jpg\"], [\"style\", \"display:block;height: 100px;margin:6px auto;width:318px;\", 4, \"ngFor\", \"ngForOf\"], [2, \"display\", \"block\", \"height\", \"100px\", \"margin\", \"6px auto\", \"width\", \"318px\"], [\"style\", \"margin:auto 3px;width:100px;height: 100px;background-color:rgb(49, 60, 57);float:left;display:inline-block;color:white;\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [2, \"margin\", \"auto 3px\", \"width\", \"100px\", \"height\", \"100px\", \"background-color\", \"rgb(49, 60, 57)\", \"float\", \"left\", \"display\", \"inline-block\", \"color\", \"white\", 3, \"click\"], [\"src\", \"./assets/img/zero.jpg\", 3, \"alt\", 4, \"ngIf\"], [\"src\", \"./assets/img/cross.jpg\", 3, \"alt\", 4, \"ngIf\"], [\"src\", \"./assets/img/zero.jpg\", 3, \"alt\"], [\"src\", \"./assets/img/cross.jpg\", 3, \"alt\"], [2, \"width\", \"300px\", \"margin\", \"auto\", \"text-align\", \"center\"], [2, \"height\", \"50px\", \"width\", \"100px\", 3, \"click\"]],\n    template: function MainComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, MainComponent_body_0_Template, 9, 0, \"body\", 0);\n        i0.ɵɵtemplate(1, MainComponent_body_1_Template, 2, 1, \"body\", 0);\n        i0.ɵɵtemplate(2, MainComponent_body_2_Template, 7, 3, \"body\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.cellValue === -1 && ctx.win === 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.cellValue !== -1 && ctx.win === 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.win !== 0);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf],\n    styles: [\"\"]\n  });\n  return MainComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}